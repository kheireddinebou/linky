{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbook/Documents/coding/pr/linky/client/api/index.ts"],"sourcesContent":["import axios from \"axios\";\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL;\n\nexport const publicRequest = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n  withCredentials: true,\n});\n\n// Create axios instance\nexport const userRequest = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n  withCredentials: true,\n});\n\n// Request interceptor to add token\n// userRequest.interceptors.request.use(config => {\n//   const token = Cookies.get(\"token\");\n//   if (token) {\n//     config.headers.Authorization = `Bearer ${token}`;\n//   }\n//   return config;\n// });\n\n// // Response interceptor for error handling\n// api.interceptors.response.use(\n//   response => response,\n//   error => {\n//     if (error.response?.status === 401) {\n//       // Token expired or invalid\n//       useAuthStore.getState().logout();\n//       window.location.href = \"/login\";\n//     }\n//     return Promise.reject(error);\n//   }\n// );\n"],"names":[],"mappings":";;;;;;AAEqB;AAFrB;;AAEA,MAAM;AAEC,MAAM,gBAAgB,sMAAK,CAAC,MAAM,CAAC;IACxC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB;AAGO,MAAM,cAAc,sMAAK,CAAC,MAAM,CAAC;IACtC,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB,IAEA,mCAAmC;CACnC,mDAAmD;CACnD,wCAAwC;CACxC,iBAAiB;CACjB,wDAAwD;CACxD,MAAM;CACN,mBAAmB;CACnB,MAAM;CAEN,6CAA6C;CAC7C,iCAAiC;CACjC,0BAA0B;CAC1B,eAAe;CACf,4CAA4C;CAC5C,oCAAoC;CACpC,0CAA0C;CAC1C,yCAAyC;CACzC,QAAQ;CACR,oCAAoC;CACpC,MAAM;CACN,KAAK","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbook/Documents/coding/pr/linky/client/api/user.ts"],"sourcesContent":["import { AxiosResponse } from \"axios\";\nimport { userRequest } from \".\";\n\nexport async function fetchCurrentUser(): Promise<User> {\n  const res: AxiosResponse<User> = await userRequest.get(\"/user/getUserData\");\n  return res.data;\n}\n"],"names":[],"mappings":";;;;AACA;;AAEO,eAAe;IACpB,MAAM,MAA2B,MAAM,8HAAW,CAAC,GAAG,CAAC;IACvD,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbook/Documents/coding/pr/linky/client/store/auth.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\nimport Cookies from \"js-cookie\";\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  setUser: (user: User) => void;\n  setToken: (token: string) => void;\n  logout: () => void;\n  setLoading: (loading: boolean) => void;\n}\n\nexport const useAuthStore = create<AuthState>()(\n  persist(\n    set => ({\n      user: null,\n      token: Cookies.get(\"token\") || null,\n      isAuthenticated: false,\n      isLoading: false,\n      setUser: user => set({ user, isAuthenticated: true }),\n      setToken: token => {\n        Cookies.set(\"token\", token, { expires: 7 });\n        set({ token, isAuthenticated: true });\n      },\n      logout: () => {\n        Cookies.remove(\"token\");\n        set({ user: null, token: null, isAuthenticated: false });\n      },\n      setLoading: isLoading => set({ isLoading }),\n    }),\n    {\n      name: \"linky\",\n      partialize: state => ({\n        user: state.user,\n        isAuthenticated: state.isAuthenticated,\n      }),\n    }\n  )\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAaO,MAAM,eAAe,IAAA,0UAAM,IAChC,IAAA,gVAAO,EACL,CAAA,MAAO,CAAC;QACN,MAAM;QACN,OAAO,4NAAO,CAAC,GAAG,CAAC,YAAY;QAC/B,iBAAiB;QACjB,WAAW;QACX,SAAS,CAAA,OAAQ,IAAI;gBAAE;gBAAM,iBAAiB;YAAK;QACnD,UAAU,CAAA;YACR,4NAAO,CAAC,GAAG,CAAC,SAAS,OAAO;gBAAE,SAAS;YAAE;YACzC,IAAI;gBAAE;gBAAO,iBAAiB;YAAK;QACrC;QACA,QAAQ;YACN,4NAAO,CAAC,MAAM,CAAC;YACf,IAAI;gBAAE,MAAM;gBAAM,OAAO;gBAAM,iBAAiB;YAAM;QACxD;QACA,YAAY,CAAA,YAAa,IAAI;gBAAE;YAAU;IAC3C,CAAC,GACD;IACE,MAAM;IACN,YAAY,CAAA,QAAS,CAAC;YACpB,MAAM,MAAM,IAAI;YAChB,iBAAiB,MAAM,eAAe;QACxC,CAAC;AACH","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbook/Documents/coding/pr/linky/client/app/%28auth%29/oauth2/callback/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { fetchCurrentUser } from \"@/api/user\";\nimport { useAuthStore } from \"@/store/auth\";\nimport { useSearchParams } from \"next/navigation\";\nimport { useRouter } from \"next/navigation\";\nimport { useEffect } from \"react\";\nimport { toast } from \"sonner\";\n\nconst OAuth2Callback = () => {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const { setUser, setToken } = useAuthStore();\n\n  useEffect(() => {\n    const token = searchParams.get(\"token\");\n    const user = searchParams.get(\"user\");\n    const error = searchParams.get(\"error\");\n\n    const handleAuthenticateUser = async () => {\n      if (error) {\n        toast.error(\"Authentication failed: \" + error);\n        router.push(\"/login\");\n        return;\n      }\n\n      if (token) {\n        try {\n          setToken(token);\n          const userData = await fetchCurrentUser();\n          setUser(userData);\n          toast.success(\"Successfully signed in with Google! âœ¨\");\n          router.push(\"/dashboard\");\n        } catch (error) {\n          toast.error(\"Failed to process authentication data\");\n          router.push(\"/login\");\n        }\n      } else {\n        toast.error(\"Invalid authentication response\");\n        router.push(\"/login\");\n      }\n    };\n\n    handleAuthenticateUser();\n  }, [searchParams, router, setUser, setToken]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-background\">\n      <div className=\"text-center\">\n        <div className=\"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4\"></div>\n        <p className=\"text-muted-foreground\">Processing authentication...</p>\n      </div>\n    </div>\n  );\n};\n\nexport default OAuth2Callback;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;;;AAPA;;;;;;;AASA,MAAM,iBAAiB;;IACrB,MAAM,eAAe,IAAA,uRAAe;IACpC,MAAM,SAAS,IAAA,iRAAS;IACxB,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,IAAA,gIAAY;IAE1C,IAAA,ySAAS;oCAAC;YACR,MAAM,QAAQ,aAAa,GAAG,CAAC;YAC/B,MAAM,OAAO,aAAa,GAAG,CAAC;YAC9B,MAAM,QAAQ,aAAa,GAAG,CAAC;YAE/B,MAAM;mEAAyB;oBAC7B,IAAI,OAAO;wBACT,oRAAK,CAAC,KAAK,CAAC,4BAA4B;wBACxC,OAAO,IAAI,CAAC;wBACZ;oBACF;oBAEA,IAAI,OAAO;wBACT,IAAI;4BACF,SAAS;4BACT,MAAM,WAAW,MAAM,IAAA,kIAAgB;4BACvC,QAAQ;4BACR,oRAAK,CAAC,OAAO,CAAC;4BACd,OAAO,IAAI,CAAC;wBACd,EAAE,OAAO,OAAO;4BACd,oRAAK,CAAC,KAAK,CAAC;4BACZ,OAAO,IAAI,CAAC;wBACd;oBACF,OAAO;wBACL,oRAAK,CAAC,KAAK,CAAC;wBACZ,OAAO,IAAI,CAAC;oBACd;gBACF;;YAEA;QACF;mCAAG;QAAC;QAAc;QAAQ;QAAS;KAAS;IAE5C,qBACE,4TAAC;QAAI,WAAU;kBACb,cAAA,4TAAC;YAAI,WAAU;;8BACb,4TAAC;oBAAI,WAAU;;;;;;8BACf,4TAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;;;;;;;AAI7C;GA7CM;;QACiB,uRAAe;QACrB,iRAAS;QACM,gIAAY;;;KAHtC;uCA+CS","debugId":null}}]
}